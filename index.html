<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pharmacy Typing Practice (NCC)</title>
  <style>
    :root{
      --ncc-purple:#6c4ba5;
      --ncc-teal:#1aa3ad;
      --bg:#f8fafc;
      --surface:#ffffff;
      --ink:#1f2937;
      --muted:#6b7280;
      --border:#e5e7eb;
      --ink-contrast:#ffffff;
      --ok:#16a34a;
      --warn:#f59e0b;
      --err:#ef4444;
      --shadow:0 10px 20px rgba(17,24,39,.08);
      --ring: 0 0 0 3px rgba(26,163,173,.25);
    }

    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif}
    .wrap{max-width:1200px;margin:0 auto;padding:20px}

    header{display:flex;gap:16px;align-items:center;justify-content:space-between;padding:14px 16px;border-radius:16px;background:linear-gradient(135deg,var(--ncc-purple),var(--ncc-teal));color:var(--ink-contrast);box-shadow:var(--shadow)}
    h1{font-size:1.25rem;margin:0;color:var(--ink-contrast)}

    .grid{display:grid;grid-template-columns:320px 1fr;gap:16px;margin-top:16px}

    .card{background:var(--surface);border-radius:14px;padding:14px 16px;border:1px solid var(--border);box-shadow:var(--shadow)}

    label{display:block;font-size:.9rem;color:var(--muted);margin:8px 0 4px}

    select,button,input[type="text"]{display:block;width:calc(100% - 4px);padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:var(--surface);color:var(--ink);box-shadow:none;box-sizing:border-box}
    select:focus,button:focus,input[type="text"]:focus,.typed:focus{outline:none;box-shadow:var(--ring)}

    button{cursor:pointer;transition:.15s transform ease, .15s box-shadow ease}
    button:active{transform:translateY(1px)}
    button.primary{background:linear-gradient(135deg,var(--ncc-purple),var(--ncc-teal));border:0;color:var(--ink-contrast)}
    button.primary:disabled{opacity:.7}
    button.ghost{background:transparent;border:1px solid var(--ncc-teal);color:var(--ncc-teal)}
    button.ghost:hover{box-shadow:0 0 0 3px rgba(26,163,173,.15)}
    button:disabled{opacity:.6;cursor:not-allowed}

    .row{display:flex;gap:8px;align-items:center}

    .stats{display:flex;gap:12px;flex-wrap:wrap}
    .stat{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:10px 12px;min-width:120px;text-align:center}
    .stat small{display:block;color:var(--muted);font-size:.75rem}

    .prompt{user-select:none;white-space:pre-wrap;background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:12px;min-height:160px;max-height:220px;overflow:auto}
    .typed{min-height:160px;max-height:220px;overflow:auto;border-radius:12px;border:1px dashed var(--border);padding:12px;background:var(--surface)}

    .char{padding:1px 0;border-bottom:2px solid transparent}
    .char.correct{color:var(--ok)}
    .char.incorrect{color:var(--err);border-bottom-color:var(--err)}

    .controls{display:flex;gap:8px;flex-wrap:wrap}
    .muted{color:var(--muted)}

    .footer{margin-top:12px;color:var(--muted);font-size:.85rem}

    .table{width:100%;border-collapse:collapse}
    .table th,.table td{padding:8px;border-bottom:1px solid var(--border);text-align:left;vertical-align:top}
    .table th{color:var(--muted);font-weight:600}

    @media (max-width: 1000px){ .grid{grid-template-columns:1fr} }

    @media print{
      header,.controls,.side,.footer{display:none}
      body{background:#fff;color:#000}
      .card{box-shadow:none;border:1px solid #ddd}
      .prompt,.typed{background:#fff;border-color:#ddd}
    }
  </style>
</head>
<body>
<div class="wrap" id="appRoot" role="application" aria-label="Pharmacy Typing Practice">
  <header>
    <h1>NCC • Pharmacy Typing Practice</h1>
  </header>

  <div class="grid">
    <aside class="card side" aria-label="Settings">
      <label for="studentName">Student name</label>
      <input id="studentName" type="text" placeholder="First Last" />

      <label for="module">Course</label>
      <select id="module" aria-label="Course selector"></select>

      <label for="duration">Test duration</label>
      <select id="duration">
        <option value="1">1 minute</option>
        <option value="3" selected>3 minutes</option>
      </select>

      <div class="row" style="margin-top:8px">
        <input id="allowBackspace" type="checkbox" checked aria-label="Allow corrections with Backspace" />
        <label for="allowBackspace" class="muted">Allow corrections (Backspace)</label>
      </div>

      <div style="margin-top:12px" class="controls">
        <button id="startBtn" class="primary">Start</button>
        <button id="resetBtn" class="ghost">Reset</button>
      </div>

      <div style="margin-top:12px" class="stats" aria-live="polite" aria-atomic="true">
        <div class="stat"><small>Time Left</small><div id="time">3:00</div></div>
        <div class="stat"><small>WPM</small><div id="wpm">0</div></div>
        <div class="stat"><small>Accuracy</small><div id="acc">100%</div></div>
        <div class="stat"><small>Attempts</small><div id="attempts">0</div></div>
      </div>

      <div style="margin-top:12px" class="controls">
        <button id="reportBtn" class="ghost">Generate Report (Print/PDF)</button>
      </div>

      <p class="muted footer">Timed tests: <strong>1-minute</strong> or <strong>3-minute</strong>. Run ends automatically at 0. Corrections: <span id="corrState">Allowed</span>. <strong>Data is not saved between visits.</strong></p>
    </aside>

    <main class="card" aria-label="Typing area">
      <div id="msg" class="muted" aria-live="polite"></div>

      <label class="muted">Prompt stream</label>
      <div id="prompt" class="prompt" tabindex="0" aria-readonly="true"></div>

      <label class="muted">Type here</label>
      <div id="typed" class="typed" role="textbox" aria-multiline="true" tabindex="0"></div>
      <input id="hiddenInput" type="text" autocomplete="off" autocapitalize="off" spellcheck="false" style="position:absolute;left:-9999px;top:-9999px" />

      <section class="card" style="margin-top:12px">
        <h2 style="margin:0 0 8px;font-size:1rem">Course Progress (Best-3 averages, by duration)</h2>
        <table class="table" id="progressTable">
          <thead>
            <tr>
              <th>Course</th>
              <th>1-Minute<br><span class="sub">Avg WPM • Avg Acc • Attempts</span></th>
              <th>3-Minute<br><span class="sub">Avg WPM • Avg Acc • Attempts</span></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>
    </main>
  </div>
</div>
</body>
</html>
